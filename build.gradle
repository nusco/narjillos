plugins {
    id 'application'

    // Also applies the following plugins
    // - com.google.osdetector
    // - org.javamodularity.moduleplugin
    id 'org.openjfx.javafxplugin' version '0.0.11-SNAPSHOT'     // needed for M1 Mac support
}

version = '1.0'

group = 'com.example.javamod'

sourceCompatibility = JavaVersion.VERSION_17


application {
    mainModule = 'org.nusco.narjillos'
    mainClass = 'org.nusco.narjillos.application.NarjillosRunner'
}

javafx {
    // The correct jars are automatically added everywhere they are needed
    // 17.0.1 should support M1 Macs
    version = '17.0.1'
    modules = [ 'javafx.controls' ]
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'com.google.code.gson:gson:2.8.9'
    implementation 'commons-cli:commons-cli:1.5.0'
    implementation 'org.yaml:snakeyaml:1.29'
    implementation 'org.xerial:sqlite-jdbc:3.36.0.2'

    // Test
    testImplementation('junit:junit:4.13.2') {
        exclude group: 'org.hamcrest'
    }
    testImplementation 'org.hamcrest:hamcrest:2.2'
    testImplementation 'org.mockito:mockito-core:4.2.0'

    // When moving to JUnit 5
    // testImplementation "org.junit.jupiter:junit-jupiter-api:${junitVersion}"
    // testImplementation "org.junit.jupiter:junit-jupiter-params:${junitVersion}"     // optional
    // testImplementation 'org.assertj:assertj-core:3.22.0'
    // testImplementation 'org.mockito:mockito-core:4.2.0'
    // testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:${junitVersion}"
}

tasks.named('test') {
    // When moving to JUnit 5
    // useJUnitPlatform()

    testLogging {
        events 'PASSED', 'FAILED', 'SKIPPED'
    }
}